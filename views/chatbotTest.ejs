<!DOCTYPE html>
<html lang="en">
<%- include('partials/_head.ejs') %>
<body>
<%- include('partials/_header.ejs') %>
  <main role="main" class="container mt-4">
    <h1 class="mb-4">Test Chatbot: <%= chatbot.name %></h1>
    <div class="row">
      <div class="col-md-8">
        <div id="chat-container" class="border p-3 mb-3" style="height: 400px; overflow-y: auto;" data-chatbot-id="<%= chatbotUniqueId %>">
          <!-- Chat messages will appear here -->
        </div>
        <button id="clear-chat" class="btn btn-secondary mb-3">Clear Conversation</button>
        <form id="chat-form" class="input-group mb-3">
          <input type="text" id="user-input" class="form-control" placeholder="Type your message here..." required>
          <button class="btn btn-primary" type="submit">Send</button>
        </form>
      </div>
      <div class="col-md-4">
        <h3>Chatbot Configuration</h3>
        <p><strong>Personality Traits:</strong> <%= chatbot.personalityTraits.join(', ') %></p>
        <p><strong>Response Pattern:</strong> <%= chatbot.responsePattern %></p>
        <p><strong>Country:</strong> <%= chatbot.country %></p>
      </div>
    </div>
  </main>
<%- include('partials/_footer.ejs') %>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.3.2/socket.io.js"></script>
<script src="/js/chatbotTest.js" data-api-key="<%= apiKey %>" data-chatbot-id="<%= chatbotUniqueId %>"></script>
<script>
  console.log('Chatbot test page loaded. Chatbot ID:', '<%= chatbotUniqueId %>');
  console.log('Chatbot theme settings:', {
    primaryColor: '<%= chatbot.primaryColor %>',
    secondaryColor: '<%= chatbot.secondaryColor %>',
    textColor: '<%= chatbot.textColor %>'
  });
</script>
<style>
  .bot-message {
    background-color: <%= chatbot.primaryColor %>;
    color: <%= chatbot.textColor %>;
  }
  .user-message {
    background-color: <%= chatbot.secondaryColor %>;
    color: <%= chatbot.textColor %>;
  }
</style>
</body>
</html>